package com.example.shabushabu;


import com.example.shabushabu.pojo.Menus;
import com.vaadin.flow.component.html.Image;
import com.vaadin.flow.component.login.LoginForm;
import com.vaadin.flow.component.notification.Notification;
import com.vaadin.flow.component.notification.NotificationVariant;
import com.vaadin.flow.component.orderedlayout.VerticalLayout;;
import com.vaadin.flow.router.BeforeEnterEvent;
import com.vaadin.flow.router.BeforeEnterObserver;
import com.vaadin.flow.router.Route;
import org.springframework.http.MediaType;
import org.springframework.util.LinkedMultiValueMap;
import org.springframework.util.MultiValueMap;
import org.springframework.web.reactive.function.BodyInserters;
import org.springframework.web.reactive.function.client.WebClient;

import java.util.Map;


@Route(value = "login")
public class LoginView extends VerticalLayout {
    private final LoginForm login = new LoginForm();
    private Image image = new Image("data:image/png;base64,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", "Dummy");

    public LoginView() {
        addClassName("login-view");
        setSizeFull();
        setAlignItems(Alignment.CENTER);
        setJustifyContentMode(JustifyContentMode.CENTER);
        login.setForgotPasswordButtonVisible(false);
        add(image, login);

        login.addLoginListener(e -> {
            MultiValueMap<String, String> formData = new LinkedMultiValueMap<>();
            formData.add("username", e.getUsername());
            formData.add("password", e.getPassword());

            MultiValueMap<String, String> out = WebClient.create().post()
                    .uri("http://localhost:8080/userLogin")
                    .contentType(MediaType.APPLICATION_FORM_URLENCODED)
                    .body(BodyInserters.fromFormData(formData))
                    .retrieve()
                    .bodyToMono(MultiValueMap.class)
                    .block();

            Map<String,String> d = out.toSingleValueMap();
            System.out.println(d);
            if(d.get("status").equals("false")){
                Notification a = new Notification("Username or Password is invalid", 5000);
                a.addThemeVariants(NotificationVariant.LUMO_ERROR);
                a.open();
                login.setEnabled(true);
            }
            else{
                if(d.get("ses_role").equals("customer")) {
                    Notification a = new Notification("Login Success", 5000);
                    a.addThemeVariants(NotificationVariant.LUMO_SUCCESS);
                    a.open();
                    login.getUI().ifPresent(ui ->
                            ui.navigate(OrderView.class, d.get("tableNo")));
                }
                else if(d.get("ses_role").equals("manager")){
                    Notification a = new Notification("Login Success", 5000);
                    a.addThemeVariants(NotificationVariant.LUMO_SUCCESS);
                    a.open();
                    login.getUI().ifPresent(ui ->
                            ui.navigate("manager"));
                }
                else{
                    Notification a = new Notification("Login Success", 5000);
                    a.addThemeVariants(NotificationVariant.LUMO_SUCCESS);
                    a.open();
                    login.getUI().ifPresent(ui ->
                            ui.navigate("employee"));
                }
            }


        });
    }
}